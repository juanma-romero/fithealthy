var EnvatoWizard=function(t){function n(){t(".field-tooltip").on("hover",function(){t(this).find(".tip-content").toggle(350)}),t(".button-next").on("click",function(n){if(n.preventDefault(),!s(this))return!1;var e=t(this).data("callback");return!e||void 0===u[e]||(u[e](this),!1)}),t(".button-upload").on("click",function(t){t.preventDefault(),o()}),t(".theme-presets a").on("click",function(n){n.preventDefault(),t(this).parents("ul").first().find(".current").removeClass("current"),t(this).parents("li").first().addClass("current");var e=t(this).data("style");return t("#new_style").val(e),!1})}function e(){function n(t){i.empty(),void 0!==t.done?(i.addClass("lead success"),i.html(t.message),a()):(i.addClass("lead error"),i.html(t.error))}function e(){childThemeName=t("#child_theme_name").val(),jQuery.post(envato_setup_params.ajaxurl,{action:"envato_setup_child_theme",wpnonce:envato_setup_params.wpnonce,cThemeName:childThemeName},n).fail(n)}var a,i=t("#envato-setup-child-theme-text");return{init:function(t){a=function(){setTimeout(function(){window.location.href=t.href},1200)},e()}}}function a(){function n(t,i,s){"object"!=typeof t||(t.message,0)?("string"==typeof t&&s.getResponseHeader("content-type").indexOf("text/html")>=0?o.find("span").text("Success"):o.find("span").text("Error"),a()):(o.find("span").text(t.message),t.url?t.hash==u?(o.find("span").text("Failed"),a()):(u=t.hash,jQuery.post(t.url,t,function(n){e(),o.find("span").text(t.message+envato_setup_params.verify_text)}).fail(n)):a())}function e(){r&&jQuery.post(envato_setup_params.ajaxurl,{action:"envato_setup_plugins",wpnonce:envato_setup_params.wpnonce,slug:r},n).fail(n)}function a(){var n=!1;o&&(o.data("done_item")||(s++,o.data("done_item",1)),o.find(".spinner").css("display","none"));var a=t(".envato-wizard-plugins li");a.each(function(){""==r||n?(r=t(this).data("slug"),o=t(this),e(),n=!1):t(this).data("slug")==r&&(n=!0)}),s>=a.length&&i()}var i,o,s=0,r="",u="";return{init:function(n){t(".envato-wizard-plugins").addClass("installing"),i=function(){window.location.href=n.href},a()}}}function i(){function n(t){var e=o.find("span");"object"==typeof t&&void 0!==t.message?(e.text(t.message),void 0!==t.url?t.hash===u?(e.text("Failed"),a()):(u=t.hash,jQuery.post(t.url,t,n).fail(n)):(t.done,a())):(console.log(t),e.text("Error"),a())}function e(){if(r){o.find("input:checkbox").is(":checked")?jQuery.post(envato_setup_params.ajaxurl,{action:"envato_setup_content",wpnonce:envato_setup_params.wpnonce,content:r},n).fail(n):(o.find("span").text("Skipped"),setTimeout(a,300))}}function a(){var n=!1;o&&(o.data("done_item")||(s++,o.data("done_item",1)),o.find(".spinner").css("display","none"));var a=t("tr.envato_default_content");t("tr.envato_default_content input:checked");a.each(function(){""==r||n?(r=t(this).data("content"),o=t(this),e(),n=!1):t(this).data("content")==r&&(n=!0)}),s>=a.length&&i()}var i,o,s=0,r="",u="";return{init:function(n){t(".envato-setup-pages").addClass("installing"),t(".envato-setup-pages").find("input").prop("disabled",!0),i=function(){window.location.href=n.href},a()}}}function o(){"use strict";var t,n;if(void 0!==t)return void t.open();t=wp.media.frames.file_frame=wp.media({title:"Upload Logo",button:{text:"Select Logo"},multiple:!1}),t.on("select",function(){n=t.state().get("selection").first().toJSON(),jQuery(".site-logo").attr("src",n.url),jQuery("#new_logo_id").val(n.id)}),t.open()}function s(t){function n(){if(!s){for(var t="",a=0;a<u.length;a++)u[a]=u[a]+1,u[a]>=o.length&&(u[a]=0),t+=o.charAt(u[a]);e[r](t),setTimeout(function(){n()},60)}}var e=jQuery(t);if("yes"==e.data("done-loading"))return!1;var a=e.text(),i=e.outerWidth(),o="⡀⡀⡀⡀⡀⡀⡀⡀⡀⡀⠄⠂⠁⠁⠂⠄",s=!1;e.css("width",i),e.addClass("dtbaker_loading_button_current");var r=e.is("input")||e.is("button")?"val":"text";e[r](o),e.data("done-loading","yes");var u=[0,1,2];return n(),{done:function(){s=!0,e[r](a),e.removeClass("dtbaker_loading_button_current"),e.attr("disabled",!1)}}}var r,u={install_child:function(t){(new e).init(t)},install_plugins:function(t){(new a).init(t)},install_content:function(t){(new i).init(t)}};return{init:function(){r=this,t(n)},callback:function(t){console.log(t),console.log(this)}}}(jQuery);EnvatoWizard.init();